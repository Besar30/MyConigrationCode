  builder.Services.Configure<MvcOptions>(options =>
  {
      NewtonsoftJsonOutputFormatter formatter = options.OutputFormatters
             .OfType<NewtonsoftJsonOutputFormatter>()
             .First();
      formatter.SupportedMediaTypes.Add(CustomMediaTypeNames.Application.JsonV1);
      formatter.SupportedMediaTypes.Add(CustomMediaTypeNames.Application.JsonV2);
      formatter.SupportedMediaTypes.Add(CustomMediaTypeNames.Application.HateoasJson);
      formatter.SupportedMediaTypes.Add(CustomMediaTypeNames.Application.HateoasJsonV1);
      formatter.SupportedMediaTypes.Add(CustomMediaTypeNames.Application.HateoasJsonV2);

  });
  builder.Services.AddApiVersioning(options =>
  {
      options.DefaultApiVersion = new ApiVersion(1.0);
      options.AssumeDefaultVersionWhenUnspecified = true;
      options.ReportApiVersions = true;
      options.ApiVersionSelector = new DefaultApiVersionSelector(options);

      // options.ApiVersionReader = new UrlSegmentApiVersionReader();
      options.ApiVersionReader = ApiVersionReader.Combine(new MediaTypeApiVersionReader(),
                                                        new MediaTypeApiVersionReaderBuilder()
                                                     .Template("application/vnd.dev-habit.hateaos.{version}+json")
                                                     .Build());
  }).AddMvc();
